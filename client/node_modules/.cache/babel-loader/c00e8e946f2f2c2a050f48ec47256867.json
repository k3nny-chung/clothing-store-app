{"ast":null,"code":"import { firestore } from '../../firebase/firebase.utils';\nexport const fetchShopDataStart = () => ({\n  type: 'FETCH_SHOP_DATA_START'\n});\nexport const fetchShopDataSuccess = collections => ({\n  type: 'FETCH_SHOP_DATA_SUCCESS',\n  payload: collections\n});\nexport const fetchShopDataFailure = error => ({\n  type: 'FETCH_SHOP_DATA_ERROR',\n  payload: error\n});\nexport const fetchShopDataAsync = () => {\n  return async dispatch => {\n    dispatch(fetchShopDataStart());\n\n    try {\n      const querySnapshot = await firestore.collection('storeCollections').get();\n      const transformedData = querySnapshot.docs.map(doc => {\n        const {\n          title,\n          items\n        } = doc.data();\n        return {\n          id: doc.id,\n          title,\n          items,\n          routeName: encodeURI(title).toLowerCase()\n        };\n      });\n      dispatch(fetchShopDataSuccess(transformedData));\n      return transformedData.reduce((hashTable, current) => {\n        hashTable[current.title.toLowerCase()] = current;\n        return hashTable;\n      }, {});\n    } catch (error) {\n      dispatch(fetchShopDataFailure(error.message));\n    }\n  };\n};","map":{"version":3,"sources":["/Users/kennethchung/develop/clothing-store-app/src/redux/shop/shop.actions.js"],"names":["firestore","fetchShopDataStart","type","fetchShopDataSuccess","collections","payload","fetchShopDataFailure","error","fetchShopDataAsync","dispatch","querySnapshot","collection","get","transformedData","docs","map","doc","title","items","data","id","routeName","encodeURI","toLowerCase","reduce","hashTable","current","message"],"mappings":"AAAA,SAASA,SAAT,QAA0B,+BAA1B;AAEA,OAAO,MAAMC,kBAAkB,GAAG,OAAO;AACrCC,EAAAA,IAAI,EAAE;AAD+B,CAAP,CAA3B;AAIP,OAAO,MAAMC,oBAAoB,GAAIC,WAAD,KAAkB;AAClDF,EAAAA,IAAI,EAAE,yBAD4C;AAElDG,EAAAA,OAAO,EAAED;AAFyC,CAAlB,CAA7B;AAKP,OAAO,MAAME,oBAAoB,GAAIC,KAAD,KAAY;AAC5CL,EAAAA,IAAI,EAAE,uBADsC;AAE5CG,EAAAA,OAAO,EAAEE;AAFmC,CAAZ,CAA7B;AAKP,OAAO,MAAMC,kBAAkB,GAAG,MAAM;AACpC,SAAO,MAAOC,QAAP,IAAoB;AACvBA,IAAAA,QAAQ,CAACR,kBAAkB,EAAnB,CAAR;;AAEA,QAAI;AACA,YAAMS,aAAa,GAAG,MAAMV,SAAS,CAACW,UAAV,CAAqB,kBAArB,EAAyCC,GAAzC,EAA5B;AACA,YAAMC,eAAe,GAAGH,aAAa,CAACI,IAAd,CAAmBC,GAAnB,CAAwBC,GAAG,IAAI;AACnD,cAAM;AAAEC,UAAAA,KAAF;AAASC,UAAAA;AAAT,YAAmBF,GAAG,CAACG,IAAJ,EAAzB;AACA,eAAO;AACHC,UAAAA,EAAE,EAAEJ,GAAG,CAACI,EADL;AAEHH,UAAAA,KAFG;AAGHC,UAAAA,KAHG;AAIHG,UAAAA,SAAS,EAAEC,SAAS,CAACL,KAAD,CAAT,CAAiBM,WAAjB;AAJR,SAAP;AAMH,OARuB,CAAxB;AAUAd,MAAAA,QAAQ,CAACN,oBAAoB,CAACU,eAAD,CAArB,CAAR;AAEA,aAAOA,eAAe,CAACW,MAAhB,CAAwB,CAACC,SAAD,EAAYC,OAAZ,KAAwB;AACnDD,QAAAA,SAAS,CAACC,OAAO,CAACT,KAAR,CAAcM,WAAd,EAAD,CAAT,GAAyCG,OAAzC;AACA,eAAOD,SAAP;AACH,OAHM,EAGJ,EAHI,CAAP;AAKH,KAnBD,CAmBE,OAAOlB,KAAP,EAAc;AACZE,MAAAA,QAAQ,CAACH,oBAAoB,CAACC,KAAK,CAACoB,OAAP,CAArB,CAAR;AACH;AAEJ,GA1BD;AA2BH,CA5BM","sourcesContent":["import { firestore } from '../../firebase/firebase.utils';\n\nexport const fetchShopDataStart = () => ({\n    type: 'FETCH_SHOP_DATA_START'\n});\n\nexport const fetchShopDataSuccess = (collections) => ({\n    type: 'FETCH_SHOP_DATA_SUCCESS',\n    payload: collections\n});\n\nexport const fetchShopDataFailure = (error) => ({\n    type: 'FETCH_SHOP_DATA_ERROR',\n    payload: error\n});\n\nexport const fetchShopDataAsync = () => {\n    return async (dispatch) => {\n        dispatch(fetchShopDataStart());\n        \n        try {\n            const querySnapshot = await firestore.collection('storeCollections').get();\n            const transformedData = querySnapshot.docs.map( doc => {\n                const { title, items } = doc.data();\n                return {\n                    id: doc.id,\n                    title,\n                    items,\n                    routeName: encodeURI(title).toLowerCase()\n                };\n            });\n    \n            dispatch(fetchShopDataSuccess(transformedData));\n    \n            return transformedData.reduce( (hashTable, current) => {\n                hashTable[current.title.toLowerCase()] = current;\n                return hashTable;\n            }, {});\n\n        } catch (error) {\n            dispatch(fetchShopDataFailure(error.message));\n        }\n        \n    }\n};"]},"metadata":{},"sourceType":"module"}